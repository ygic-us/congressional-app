/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/mdc/field/FieldHelpBase','sap/ui/mdc/condition/Condition'],function(F,C){"use strict";var D;var T;var a;var B;var M;var b=F.extend("sap.ui.mdc.field.ConditionFieldHelp",{metadata:{library:"sap.ui.mdc"}});b.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");};b._init=function(){F._init.apply(this,arguments);D=undefined;B=undefined;};b.prototype.exit=function(){F.prototype.exit.apply(this,arguments);};b.prototype.getIcon=function(){return"sap-icon://filter-fields";};b.prototype.isFocusInHelp=function(){return true;};b.prototype.openByTyping=function(){return false;};b.prototype._createPopover=function(){var p=F.prototype._createPopover.apply(this,arguments);if((!D||!T||!a||!B||!M)&&!this._bModulesRequested){D=sap.ui.require("sap/ui/mdc/field/DefineConditionPanel");T=sap.ui.require("sap/m/Toolbar");a=sap.ui.require("sap/m/ToolbarSpacer");B=sap.ui.require("sap/m/Button");M=sap.ui.require("sap/ui/model/base/ManagedObjectModel");if(!D||!T||!a||!B||!M){sap.ui.require(["sap/ui/mdc/field/DefineConditionPanel","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/ui/model/base/ManagedObjectModel"],c.bind(this));this._bModulesRequested=true;}}if(p){p.setShowArrow(true);p.setTitle("Define Filter Conditions");p.setShowHeader(true);p.setTitleAlignment("Center");p.setContentWidth("500px");p.setResizable(true);_.call(this);}return p;};function _(){if(!this._oDefineConditionPanel&&D&&T&&a&&B&&M&&!this._bModulesRequested){this._oManagedObjectModel=new M(this);this._oDefineConditionPanel=new D(this.getId()+"-DCP",{conditions:{path:"$help>/conditions"},formatOptions:d.call(this)}).setModel(this._oManagedObjectModel,"$help");this._setContent(this._oDefineConditionPanel);var o=new B(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),type:sap.m.ButtonType.Emphasized,press:e.bind(this)});var g=new B(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:f.bind(this)});var t=new T(this.getId()+"-TB",{content:[new a(this.getId()+"-Spacer"),o,g]});var p=this.getAggregation("_popover");if(p){p.setFooter(t);}}}function c(g,t,h,i,m){D=g;T=t;a=h;B=i;M=m;this._bModulesRequested=false;if(!this._bIsBeingDestroyed){_.call(this);}}b.prototype.open=function(s){F.prototype.open.apply(this,arguments);var p=this.getAggregation("_popover");if(p&&this._oDefineConditionPanel){this._oDefineConditionPanel.setFormatOptions(d.call(this));this._oDefineConditionPanel.getBinding("conditions").resume();}return this;};b.prototype._handleAfterClose=function(E){this._oDefineConditionPanel.getBinding("conditions").suspend();F.prototype._handleAfterClose.apply(this,arguments);};b.prototype.isValidationSupported=function(){return false;};b.prototype.getItemForValue=function(v,p,i,o,g,h,j,k){return{key:p,description:undefined};};function d(){if(this._oField&&this._oField._getFormatOptions){return this._oField._getFormatOptions();}else{return{};}}function e(E){this.close();var g=this.getConditions();g=C._removeEmptyConditions(g);this.setProperty("conditions",g,true);this.fireSelect({conditions:g,add:false,close:true});}function f(E){this.close();}return b;});
