/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/base/Log"],function(C,L){"use strict";var F={};var I="sap.ui.mdc.IFilter";F.setFilter=function(f){if(this._validateFilter(f)){this._deregisterFilter();this.setAssociation("filter",f,true);this._registerFilter();this._onFilterProvided();}return this;};F._onFilterProvided=function(){return;};F._registerFilter=function(){var f=C.byId(this.getFilter());if(f){f.attachSearch(this.rebind,this);f.attachFiltersChanged(this._onFiltersChanged,this);}};F._deregisterFilter=function(){var f=C.byId(this.getFilter());if(f){f.detachSearch(this.rebind,this);f.detachFiltersChanged(this._onFiltersChanged,this);}};var _=function(c){if(!(c&&c.getMetadata()&&c.getMetadata().hasAssociation("filter"))){throw new Error("Please add the 'filter' association to your control metadata"+c);}if(!(c.rebind instanceof Function)){throw new Error("Please implement the method 'rebind' for the control "+c);}if(!(c.isFilteringEnabled instanceof Function)){throw new Error("Please implement the method isFilteringEnabled for the control "+c);}};F._validateFilter=function(f){_(this);var o=typeof f==="object"?f:C.byId(f);if(!o||o.isA(I)){return true;}throw new Error("\""+f+"\" is not valid for association \"filter\" of mdc.Table. Please use an object that implements \""+I+"\" interface");};F.checkAndRebind=function(){var p;var a;var f=C.byId(this.getFilter()),i=this.isFilteringEnabled();if(i||f){if(f){p=f.valid(false);}if(i){a=this.retrieveInbuiltFilter().then(function(o){return o.valid(false);});}Promise.all([p,a]).then(function(){this.rebind();}.bind(this),function(){});}else{this.rebind();}};return function(){this.setFilter=F.setFilter;this._registerFilter=F._registerFilter;this._deregisterFilter=F._deregisterFilter;this._validateFilter=F._validateFilter;this._onFilterProvided=F._onFilterProvided;this.checkAndRebind=F.checkAndRebind;};},true);
