/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/DataType","sap/base/Log"],function(D,L){"use strict";var H=new window.WeakMap();var M={};var k={};var h={};var f=["function"];var a={};var m={Table:{BindRows:{arguments:["object"]},RowsBound:{arguments:["class:sap.ui.model.Binding"]},UnbindRows:{arguments:["object"]},RowsUnbound:{arguments:[]},RefreshRows:{arguments:[function(r){return r in a.TableUtils.RowsUpdateReason||D.getType("sap.ui.model.ChangeReason").isValid(r);}]},UpdateRows:{arguments:[function(r){return r in a.TableUtils.RowsUpdateReason||D.getType("sap.ui.model.ChangeReason").isValid(r);}]},UpdateSizes:{arguments:[function(r){return r in a.TableUtils.RowsUpdateReason||D.getType("sap.ui.model.ChangeReason").isValid(r);}]},OpenMenu:{arguments:[function(C){return C?typeof C.isOfType==="function":false;},"class:sap.ui.unified.Menu"]}},Row:{UpdateState:{arguments:[function(r){return r!=null&&r.hasOwnProperty("context")&&r.hasOwnProperty("Type")&&r.hasOwnProperty("type")&&r.type in r.Type;}]}},Column:{MenuItemNotification:{arguments:["class:sap.ui.table.Column"],returnValue:"boolean"}},Signal:{arguments:["string"]}};a.TableUtils=null;a.Keys=k;a.call=function(s,K){var i=H.get(s);if(!c(s)||!b(K)){return undefined;}var m=g(K);if(i==null){if(m.returnValue){return[];}return undefined;}var A=Array.prototype.slice.call(arguments,2);var j=v(m,A);if(!j){throw new Error("Hook with key "+K+" was not called. Invalid arguments passed\n"+s);}var r=i.map(function(o){if(o.key===M){var C={};var l=o.handlerContext==null?o.target:o.handlerContext;C[K]=A;return a.TableUtils.dynamicCall(o.target,C,l);}else if(o.key===K){return o.handler.apply(o.handlerContext,A);}});r=d(m,r);return r;};a.install=function(s,t,T){if(!t||!c(s)){return;}var i=H.get(s);if(i==null){i=[];}var j=i.some(function(o){return o.key===M&&o.target===t&&o.handlerContext===T;});if(j){return;}i.push({key:M,target:t,handlerContext:T});H.set(s,i);};a.uninstall=function(s,t,T){var j=H.get(s);if(j==null||!t){return;}for(var i=0;i<j.length;i++){var o=j[i];if(o.key===M&&o.target===t&&o.handlerContext===T){j.splice(i,1);break;}}if(j.length===0){H.delete(s);}else{H.set(s,j);}};a.register=function(s,K,i,t){if(typeof i!=="function"||!c(s)||!b(K)){return;}var j=H.get(s);if(j==null){j=[];}j.push({key:K,handler:i,handlerContext:t});H.set(s,j);};a.deregister=function(s,K,j,t){var l=H.get(s);if(l==null){return;}for(var i=0;i<l.length;i++){var o=l[i];if(o.key===K&&o.handler===j&&o.handlerContext===t){l.splice(i,1);break;}}if(l.length===0){H.delete(s);}else{H.set(s,l);}};function e(K,C,s){Object.keys(C).forEach(function(p){var i=s?s+"."+p:p;if("arguments"in C[p]){f.forEach(function(F){if(C[p].arguments.indexOf(F)>-1||C[p].returnValue===F){throw new Error("Forbidden type found in metadata of hook "+s+": "+F);}});K[p]=i;h[i]=C[p];}else{K[p]={};e(K[p],C[p],i);}});return K;}e(k,m);function b(K){return K in h;}function c(s){return a.TableUtils.isA(s,"sap.ui.table.Table")&&!s.bIsDestroyed&&!s._bIsBeingDestroyed;}function g(K){return h[K];}function v(m,A){return m.arguments.length===A.length&&m.arguments.every(function(t,i){if(typeof t==="function"){return t(A[i]);}else if(t.startsWith("class:")){return a.TableUtils.isA(A[i],t.substring(6));}else{return D.getType(t).isValid(A[i]);}});}function d(m,V){if(!m.returnValue){return undefined;}var t=m.returnValue;return V.filter(function(i){if(i==null){return false;}else if(typeof t==="function"){return t(i);}else if(t==="Promise"){return i instanceof Promise;}else if(t.startsWith("class:")){return a.TableUtils.isA(i,t.substring(6));}else{return D.getType(t).isValid(i);}});}return a;},true);
